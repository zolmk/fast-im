## Fast-im
### 一、技术栈
Java、Netty、RabbitMQ、dubbo、ZooKeeper、Redis、MySQL。
### 二、架构演化
#### 2.1 第一版
![第一版框架图](./doc/images/第一版框架图.png)

初版是在我学习完了Netty、Nginx、ZooKeeper等技术的情况下，为了加深对这些技术的理解，初步设计的分布式IM系统的框架结构，可以看到有很多不完善的地方。

该版本的缺点主要有：
- 每两个MsgServer之间都会互相通过一条TCP连接进行通信，虽然保证了消息的即时性，但是容易产生性能瓶颈。当消息量上去之后，消息在服务节点之间传输时会产生阻塞。
- 框架难以进行扩展，不适合大规模部署。
- 没有对用户在线状态进行集中管理，高度依赖ZooKeeper。

优点：
- 架构简单易懂。
- 实现简单。

#### 2.2 目前的架构图
![第二版框架图](./doc/images/第二版框架图.png)

目前的架构分接入层、业务逻辑层、以及基础服务层。微服务之间的通信主要采用了dubbo和消息队列。

### 三、已完成项
- [✔] 自定义通信协议
- [✔] connector支持集群和单机两种模式，支持自动扩缩容
- [✔] 基于Netty的连接器实现
- [✔] 进行了抽象设计，支持多种消息传递方式、支持扩展
- [✔] 完成使用kafka消息队列来作为消息传递器
- [✔] 消息ack机制、超时重试，确保消息可靠传输
- [✔] 核心模块间采用rpc、可选的消息队列通信，可以处理更多请求
- [✔] core模块和route模块采用无状态设计，可以自动化运维


### 四、未完成项
- 完成消息持久化
- 接入分布式ID生成系统
- 高并发环境下的测试

